---
import LinkPersonne from "../../components/LinkPersonne.astro";
import Layout from "../../layout/Layout.astro";

export const prerender = false;

const personnes = await Astro.locals.pb.collection("personne").getFullList();
---

<Layout title="Liste des personnes">
  <h1>Liste des personnes</h1>
  <ul>
    {
      personnes.map((personne) => (<li><LinkPersonne personne={personne}></li>))
    }
  </ul>

  {Astro.locals.pb.authStore.isValid ? <a href="/personnes/add/">Ajouter une nouvelle personne</a> : ""}
</Layout>
